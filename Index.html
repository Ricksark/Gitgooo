<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gitgooo</title>

    <!-- Google Font: Saira -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Saira:wght@100..900&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <style>
        :root {
            --company-name: "Gitgooo.";
            --primary-font: "Saira", sans-serif;
            --google-blue: #1a73e8;
            
            /* Theme Colors */
            --bg-glass: rgba(255, 255, 255, 0.8);
            --text-color: #202124;
            --drawer-bg: #ffffff;
            --input-bg: #f1f3f4;
            --btn-bg: #f1f3f4;
            --btn-border: #dadce0;
            --border-color: #eee;
        }

        [data-theme="dark"] {
            --bg-glass: rgba(32, 33, 36, 0.85);
            --text-color: #e8eaed;
            --drawer-bg: #202124;
            --input-bg: #3c4043;
            --btn-bg: #303134;
            --btn-border: #5f6368;
            --border-color: #3c4043;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: var(--primary-font); }
        body, html { height: 100%; width: 100%; overflow: hidden; color: var(--text-color); }

        /* Background Layer */
        #bg-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover; background-position: center;
            z-index: -1; transition: 0.5s ease-in-out;
            background-image: url('https://i.pinimg.com/1200x/b2/88/53/b288539d28e799dd4ab0b1181e75ffaa.jpg');
        }

        /* Header */
        header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 5%; width: 100%; z-index: 10;
        }
        .brand { font-weight: 800; font-size: 1.4rem; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }

        /* User Profile & Logout Styles */
        .user-profile {
            display: none; /* Hidden by default */
            align-items: center;
            gap: 12px;
            background: var(--drawer-bg);
            padding: 5px 10px 5px 5px;
            border-radius: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .user-img {
            width: 32px; height: 32px; border-radius: 50%; object-fit: cover;
        }
        .logout-btn {
            background: var(--btn-bg);
            border: 1px solid var(--btn-border);
            color: var(--text-color);
            padding: 6px 14px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: 0.2s;
        }
        .logout-btn:hover { opacity: 0.8; }

        /* Search Section */
        .container {
            height: 80vh; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; padding: 0 15px;
        }

        .search-form { width: 100%; max-width: 584px; margin: 30px 0; }
        .search-wrap {
            background: white; border-radius: 24px; display: flex; align-items: center; 
            padding: 0 14px; height: 46px; box-shadow: 0 1px 6px rgba(32,33,36,0.28); transition: box-shadow 0.2s;
        }
        .search-wrap:hover, .search-wrap:focus-within { box-shadow: 0 2px 10px rgba(32,33,36,0.35); }
        .search-wrap input { flex: 1; border: none; outline: none; padding: 0 10px; font-size: 16px; color: #202124; background: transparent; min-width: 0; }
        .search-wrap i { color: #5f6368; font-size: 18px; cursor: pointer; padding: 8px; transition: color 0.2s; }
        .search-wrap i:hover { color: var(--google-blue); }

        /* Shortcuts */
        .shortcuts { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
        .shortcut { 
            display: flex; flex-direction: column; align-items: center; 
            text-decoration: none; color: white; width: 75px; text-shadow: 0 1px 3px rgba(0,0,0,0.8);
            position: relative; cursor: pointer;
        }
        .sc-icon { 
            width: 48px; height: 48px; background: var(--bg-glass); color: var(--text-color);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            margin-bottom: 8px; font-size: 20px; backdrop-filter: blur(5px); transition: 0.3s;
        }
        
        /* Locked Item Styles */
        .shortcut.locked .sc-icon { opacity: 0.5; background: #444; color: #888; }
        .shortcut.locked span { opacity: 0.5; }
        .lock-badge {
            position: absolute; top: 0; right: 10px; background: #ea4335; color: white;
            border-radius: 50%; width: 18px; height: 18px; font-size: 10px;
            display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* Settings Drawer */
        .drawer {
            position: fixed; top: 0; right: -350px; width: 320px; height: 100%;
            background: var(--drawer-bg); z-index: 1000; padding: 25px;
            transition: 0.4s; box-shadow: -5px 0 15px rgba(0,0,0,0.2); overflow-y: auto;
            display: flex; flex-direction: column;
        }
        .drawer.open { right: 0; }
        .set-row { margin-bottom: 20px; }
        .btn { width: 100%; padding: 10px; border: none; border-radius: 5px; cursor: pointer; background: var(--google-blue); color: white; font-weight: 600; }
        .input-field { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; background: var(--input-bg); color: var(--text-color); margin-bottom: 10px; }

        /* Lock Manager List */
        .lock-list {
            border: 1px solid var(--border-color);
            border-radius: 5px;
            max-height: 150px;
            overflow-y: auto;
        }
        .lock-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 8px 10px; border-bottom: 1px solid var(--border-color); font-size: 14px;
        }
        .lock-item:last-child { border-bottom: none; }
        
        /* Custom Checkbox Toggle */
        .switch { position: relative; display: inline-block; width: 34px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc; transition: .4s; border-radius: 34px;
        }
        .slider:before {
            position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px;
            background-color: white; transition: .4s; border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--google-blue); }
        input:checked + .slider:before { transform: translateX(14px); }

        /* Social Icons */
        .social-row { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
        .social-row a { color: var(--text-color); font-size: 24px; transition: 0.3s; }
        .social-row a:hover { color: var(--google-blue); transform: scale(1.1); }

        /* Copyleft Footer */
        .footer-copy {
            margin-top: auto;
            text-align: center;
            font-size: 12px;
            color: #888;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        /* Voice Popup */
        #voice-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.98); z-index: 2000; display: none;
            flex-direction: column; align-items: center; justify-content: center;
        }
        .mic-pulse {
            width: 100px; height: 100px; background: #ea4335; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; color: white;
            font-size: 40px; animation: pulse 1.5s infinite;
        }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(234, 67, 53, 0.4); } 70% { box-shadow: 0 0 0 30px rgba(234, 67, 53, 0); } 100% { box-shadow: 0 0 0 0 rgba(234, 67, 53, 0); } }

        /* Responsive Adjustments */
        @media (max-width: 600px) {
            .brand { font-size: 1.1rem; }
            .shortcuts { gap: 10px; }
            .shortcut { width: 65px; font-size: 12px; }
            .sc-icon { width: 42px; height: 42px; font-size: 16px; }
            #g_id_signin { transform: scale(0.85); transform-origin: right; }
            .search-wrap { height: 42px; padding: 0 10px; }
        }
    </style>
</head>
<body data-theme="light">

    <div id="bg-layer"></div>

    <!-- VOICE SEARCH POPUP -->
    <div id="voice-modal">
        <div class="mic-pulse"><i class="i class fa-solid fa-microphone"></i></div>
        <h2 id="voice-txt" style="margin-top:25px; color:#5f6368; font-weight: 300;">Listening...</h2>
        <button onclick="closeVoice()" style="margin-top:50px; background:none; border:1px solid #5f6368; padding:10px 25px; border-radius:30px; cursor:pointer">Cancel</button>
    </div>

    <!-- SETTINGS PANEL -->
    <div class="drawer" id="settings-drawer">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h3>Settings</h3>
            <i class="i class fa-solid fa-xmark" onclick="toggleSettings()" style="cursor:pointer; font-size:22px"></i>
        </div>
<hr><br>
        <div class="set-row">
            <label style="display:block; margin-bottom:10px;">Appearance</label>
            <button class="btn" onclick="toggleTheme()">Toggle Dark/Light Mode</button>
        </div>

        <div class="set-row">
            <label style="display:block; margin-bottom:10px;">Custom Background</label>
            <input type="file" id="bg-upload" class="input-field" accept="image/*">
            <button class="btn" style="background:#888" onclick="resetBg()">Reset Background</button>
        </div>

        <!-- SEARCH ENGINE SELECTION -->
        <div class="set-row">
            <label style="display:block; margin-bottom:10px;">Search Engine</label>
            <select id="engine-select" class="input-field" onchange="changeEngine()">
                <option value="google">Google</option>
                <option value="bing">Microsoft Bing</option>
                <option value="ddg">DuckDuckGo</option>
                <option value="yahoo">Yahoo</option>
            </select>
        </div>

        <!-- ADD SHORTCUT WITH LOCK OPTION -->
        <div class="set-row">
            <label style="display:block; margin-bottom:10px;">Add Shortcut</label>
            <input type="text" id="sc-name" class="input-field" placeholder="Site Name">
            <input type="text" id="sc-url" class="input-field" placeholder="https://...">
            
            <div style="display:flex; align-items:center; gap:10px; margin-bottom:15px; padding:5px; background:var(--input-bg); border-radius:5px;">
                <input type="checkbox" id="sc-lock-check" style="width:20px; height:20px;">
                <label for="sc-lock-check" style="font-size:14px; cursor:pointer">Lock (Requires Login)</label>
            </div>

            <button class="btn" style="background:#34a853" onclick="addShortcut()">Add Shortcut</button>
        </div>

        <!-- MANAGE LOCKS -->
        <div class="set-row">
            <label style="display:block; margin-bottom:10px;">Manage Locks</label>
            <div class="lock-list" id="lock-manager">
                <!-- Items injected via JS -->
            </div>
        </div>

        <!-- SOCIALS & FOOTER -->
        <div class="set-row" style="margin-top:20px;">
            <label style="display:block; text-align:center;">Follow Us</label>
            <div class="social-row">
                <a href="https://github.com" target="_blank"><i class="fa-brands fa-github"></i></a>
                <a href="https://facebook.com" target="_blank"><i class="fa-brands fa-facebook"></i></a>
                <a href="https://instagram.com" target="_blank"><i class="fa-brands fa-instagram"></i></a>
                <a href="https://linkedin.com" target="_blank"><i class="fa-brands fa-linkedin"></i></a>
            </div>
        </div>

        <div class="footer-copy">
            <p>version 1.51.0</p>
            <p style="margin-top:5px;"><i class="fa-solid fa-rotate-left"></i> Copyleft 2022 - 2026</p>
        </div>
    </div>

    <header>
        <div class="brand" id="brand-text">Gitgooo</div>
        <div class="nav-right">
            <div id="g_id_signin"></div>
            <div id="user-area" class="user-profile">
                <img id="user-pic" src="" alt="User" class="user-img">
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Google Branding -->
        <div style="background:white; padding:2px 4px; border-radius:15px; box-shadow:0 2px 10px rgba(0,0,0,0.1);">
            <img src="https://blogger.googleusercontent.com/img/a/AVvXsEg5o4Jdd5qiDaMBdosSO-wvWEcHPGrqU4ADAAf8x2LclGD9HGm4qijEBiP2XrjuS_MFfT9aLFI83maEhqcq7UPJdnGmLHX7nLwmYKx8shabt7nVppH9BiZ6hZcye3btgszKZ4QeA1GmJNU2gzy_XApi2JV9TncXPTkCjUifA6pT_xMdpDK6mWTbB2VHQUOg" width="200px"/>
        </div>

        <form class="search-form" id="search-form">
            <div class="search-wrap">
                <i class="i class fa-solid fa-magnifying-glass" style="font-size: 16px; color: #9aa0a6;"></i>
                <input type="text" id="search-input" placeholder="Search...." autocomplete="off">
                <i class="i class fa-solid fa-microphone" onclick="startVoice()"></i>
                <i class="i class fa-solid fa-camera" onclick="window.location.href='https://lens.google.com/upload'"></i>
            </div>
        </form>

        <div class="shortcuts" id="shortcuts-grid"></div>
    </main>

    <button onclick="attemptOpenSettings()" style="position:fixed; bottom:25px; right:25px; border:none; background:rgba(0,0,0,0.5); color:white; width:48px; height:48px; border-radius:50%; cursor:pointer; z-index:100">
        <i class="i class fa-solid fa-gear" style="font-size:22px"></i>
    </button>

    <script>
        // Data Handling
        let appData = {
            theme: localStorage.getItem('theme') || 'light',
            bg: localStorage.getItem('custom_bg') || '',
            engine: localStorage.getItem('search_engine') || 'google',
            shortcuts: JSON.parse(localStorage.getItem('my_links')) || [
                { name: 'Gmail', url: 'https://gmail.com', icon: 'fa-envelope', requiresLogin: true },
                { name: 'YouTube', url: 'https://youtube.com', icon: 'fa-brands fa-youtube', requiresLogin: true },
                { name: 'Maps', url: 'https://maps.google.com', icon: 'fa-location-dot', requiresLogin: false }
            ]
        };

        const searchEngines = {
            google: "https://www.google.com/search?q=",
            bing: "https://www.bing.com/search?q=",
            ddg: "https://duckduckgo.com/?q=",
            yahoo: "https://search.yahoo.com/search?p="
        };

        function init() {
            document.body.setAttribute('data-theme', appData.theme);
            if(appData.bg) document.getElementById('bg-layer').style.backgroundImage = `url(${appData.bg})`;
            document.getElementById('brand-text').innerText = getComputedStyle(document.documentElement).getPropertyValue('--company-name').replace(/"/g, '');
            document.getElementById('engine-select').value = appData.engine;
            
            checkLoginState();
            
            if(!localStorage.getItem('user_session')) {
                initGoogleAuth();
            }
        }

        /* --- GOOGLE LOGIN & LOGOUT --- */
        function initGoogleAuth() {
            window.onload = function () {
                google.accounts.id.initialize({
                    client_id: "623614376922-61vo632ras0kin9fmkr2pq4g59a9hnu3.apps.googleusercontent.com",
                    callback: handleCredentialResponse
                });
                google.accounts.id.renderButton(document.getElementById("g_id_signin"), { theme: "outline", size: "large", shape: "pill" });
            }
        }

        function handleCredentialResponse(res) {
            const payload = JSON.parse(atob(res.credential.split('.')[1]));
            localStorage.setItem('user_session', JSON.stringify({ name: payload.name, picture: payload.picture }));
            window.location.reload();
        }

        function checkLoginState() {
            const session = JSON.parse(localStorage.getItem('user_session'));
            const loginBtn = document.getElementById('g_id_signin');
            const userArea = document.getElementById('user-area');

            if (session) {
                if(loginBtn) loginBtn.style.display = 'none';
                userArea.style.display = 'flex';
                document.getElementById('user-pic').src = session.picture;
                renderLockManager(); 
            } else {
                if(loginBtn) loginBtn.style.display = 'block';
                userArea.style.display = 'none';
            }
            renderShortcuts(!!session);
        }

        function logout() {
            localStorage.removeItem('user_session');
            if (typeof google !== 'undefined' && google.accounts) google.accounts.id.disableAutoSelect();
            window.location.reload();
        }

        /* --- UI LOGIC --- */
        function attemptOpenSettings() {
            if(localStorage.getItem('user_session')) {
                document.getElementById('settings-drawer').classList.toggle('open');
            } else {
                alert("Please Login to access Settings.");
            }
        }

        function toggleSettings() { document.getElementById('settings-drawer').classList.remove('open'); }
        
        function toggleTheme() {
            appData.theme = appData.theme === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', appData.theme);
            localStorage.setItem('theme', appData.theme);
        }

        function changeEngine() {
            appData.engine = document.getElementById('engine-select').value;
            localStorage.setItem('search_engine', appData.engine);
        }

        document.getElementById('bg-upload').onchange = (e) => {
            const reader = new FileReader();
            reader.onload = (event) => {
                document.getElementById('bg-layer').style.backgroundImage = `url(${event.target.result})`;
                localStorage.setItem('custom_bg', event.target.result);
            };
            reader.readAsDataURL(e.target.files[0]);
        };

        function resetBg() {
            localStorage.removeItem('custom_bg');
            window.location.reload();
        }

        function renderShortcuts(isLoggedIn) {
            const grid = document.getElementById('shortcuts-grid');
            grid.innerHTML = '';
            appData.shortcuts.forEach(s => {
                if(s.requiresLogin && !isLoggedIn) {
                    grid.innerHTML += `
                        <div class="shortcut locked" onclick="alert('Locked: Login required')">
                            <div class="sc-icon"><i class="i class fa-solid ${s.icon}"></i><div class="lock-badge"><i class="fa-solid fa-lock"></i></div></div>
                            <span>${s.name}</span>
                        </div>`;
                } else {
                    grid.innerHTML += `<a href="${s.url}" class="shortcut"><div class="sc-icon"><i class="i class fa-solid ${s.icon}"></i></div><span>${s.name}</span></a>`;
                }
            });
        }

        function renderLockManager() {
            const list = document.getElementById('lock-manager');
            list.innerHTML = '';
            appData.shortcuts.forEach((s, index) => {
                list.innerHTML += `
                    <div class="lock-item">
                        <span>${s.name}</span>
                        <label class="switch">
                            <input type="checkbox" onchange="toggleLock(${index})" ${s.requiresLogin ? 'checked' : ''}>
                            <span class="slider"></span>
                        </label>
                    </div>
                `;
            });
        }

        function toggleLock(index) {
            appData.shortcuts[index].requiresLogin = !appData.shortcuts[index].requiresLogin;
            localStorage.setItem('my_links', JSON.stringify(appData.shortcuts));
            checkLoginState();
        }

        function addShortcut() {
            const name = document.getElementById('sc-name').value;
            const url = document.getElementById('sc-url').value;
            const isLocked = document.getElementById('sc-lock-check').checked;

            if(name && url) {
                appData.shortcuts.push({ name, url, icon: 'fa-link', requiresLogin: isLocked });
                localStorage.setItem('my_links', JSON.stringify(appData.shortcuts));
                
                document.getElementById('sc-name').value = ''; 
                document.getElementById('sc-url').value = '';
                document.getElementById('sc-lock-check').checked = false;
                
                checkLoginState();
            }
        }

        /* --- SEARCH & VOICE --- */
        document.getElementById('search-form').onsubmit = (e) => {
            e.preventDefault();
            const val = document.getElementById('search-input').value;
            if(val) {
                const baseUrl = searchEngines[appData.engine];
                window.location.href = baseUrl + encodeURIComponent(val);
            }
        };

        let recognition;
        function startVoice() {
            const Speech = window.SpeechRecognition || window.webkitSpeechRecognition;
            if(!Speech) return alert("Browser not supported");
            recognition = new Speech();
            recognition.onstart = () => document.getElementById('voice-modal').style.display = 'flex';
            recognition.onresult = (e) => {
                const txt = e.results[0][0].transcript;
                document.getElementById('search-input').value = txt;
                document.getElementById('search-form').dispatchEvent(new Event('submit'));
            };
            recognition.onend = closeVoice;
            recognition.start();
        }
        function closeVoice() { if(recognition) recognition.stop(); document.getElementById('voice-modal').style.display = 'none'; }

        init();
    </script>
</body>
</html>
